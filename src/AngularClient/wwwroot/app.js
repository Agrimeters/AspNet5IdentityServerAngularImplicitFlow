!function(){var a=angular.module("mainApp",["ui.router"]);a.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/authorized"),a.state("authorized",{url:"/authorized",templateUrl:"/templates/authorized.html",controller:"AuthorizedController"}).state("home",{"abstract":!0,url:"/home",templateUrl:"/templates/home.html"}).state("overview",{parent:"home",url:"/overview",templateUrl:"/templates/overview.html",controller:"OverviewController",resolve:{DataEventRecordsService:"DataEventRecordsService",dataEventRecords:["DataEventRecordsService",function(a){return a.GetDataEventRecords()}]}}).state("details",{parent:"overview",url:"/details/:id",templateUrl:"/templates/details.html",controller:"DetailsController",resolve:{DataEventRecordsService:"DataEventRecordsService",dataEventRecord:["DataEventRecordsService","$stateParams",function(a,b){var c=b.id;return console.log(b.id),a.GetDataEventRecord({id:c})}]}}).state("create",{parent:"overview",url:"/create",templateUrl:"/templates/create.html",controller:"DetailsController",resolve:{dataEventRecord:[function(){return{Id:"",Name:"",Description:"",Timestamp:"2015-08-28T09:57:32.4669632"}}]}}),c.html5Mode(!0)}]),a.run(["$rootScope",function(a){a.$on("$stateChangeError",function(a,b,c,d,e,f){console.log(a),console.log(b),console.log(c),console.log(d),console.log(e),console.log(f)}),a.$on("$stateNotFound",function(a,b,c,d){console.log(a),console.log(b),console.log(c),console.log(d)})}])}(),function(){"use strict";function a(a,b,c,d){b.info("AuthorizedController called"),a.message="AuthorizedController created",localStorage.removeItem("authorizationData");var e=localStorage.authorizationData;if(e)a.message="AuthorizedController created logged on",console.log(e),d.go("overview");else if(c.location.hash){a.message="AuthorizedController created with a code";var f=window.location.hash.substr(1),g=f.split("&").reduce(function(a,b){var c=b.split("=");return a[c[0]]=c[1],a},{});if(!g.error){if(g.state===localStorage.state)return localStorage.removeItem("state"),g.access_token;console.log("invalid state")}localStorage.authorizationData=g.access_token,d.go("overview")}else{a.message="AuthorizedController time to log on",localStorage.removeItem("authorizationData");var h="https://localhost:44300/connect/authorize",i="angularclient",j="https://localhost:44302/authorized",k="token",l="dataEventRecords",m=Date.now()+""+Math.random();localStorage.state=m;var n=h+"?client_id="+encodeURI(i)+"&redirect_uri="+encodeURI(j)+"&response_type="+encodeURI(k)+"&scope="+encodeURI(l)+"&state="+encodeURI(m);c.location=n}}var b=angular.module("mainApp");b.controller("AuthorizedController",["$scope","$log","$window","$state",a])}(),function(){"use strict";function a(a,b,c,d,e){b.info("DetailsController called"),a.message="dataEventRecord Create, Update or Delete",a.DataEventRecordsService=d,a.state=e,a.dataEventRecord=c,a.Update=function(){b.info("Updating"),b.info(c),a.DataEventRecordsService.UpdateDataEventRecord(c),a.state.go("overview")},a.Create=function(){b.info("Creating"),b.info(c),a.DataEventRecordsService.AddDataEventRecord(c),a.state.go("overview")}}var b=angular.module("mainApp");b.controller("DetailsController",["$scope","$log","dataEventRecord","DataEventRecordsService","$state",a])}(),function(){"use strict";function a(a,b,c,d){b.info("OverviewController called"),a.message="Overview",a.DataEventRecordsService=d,b.info(c),a.dataEventRecords=c,a.Delete=function(c){b.info("deleting"),a.DataEventRecordsService.DeleteDataEventRecord(c)}}var b=angular.module("mainApp");b.controller("OverviewController",["$scope","$log","dataEventRecords","DataEventRecordsService",a])}(),function(){"use strict";function a(a,b){console.log("AuthorizationInterceptor created");var c=function(a){a.headers=a.headers||{};var c=localStorage.authorizationData;return c&&(console.log("Request with authorizationData"),console.log("Bearer "+c),a.headers.Authorization="Bearer "+c),a||b.when(a)};return{request:c}}var b=angular.module("mainApp");b.service("authorizationInterceptor",["$rootScope","$q",a]),b.config(["$httpProvider",function(a){a.interceptors.push("authorizationInterceptor")}])}(),function(){"use strict";function a(a,b,c){b.info("DataEventRecordsService called");var d="https://localhost:44303",e=function(b){var e=c.defer();return console.log("addDataEventRecord started"),console.log(b),a({url:d+"api/DataEventRecords",method:"POST",data:b}).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},f=function(b){var e=c.defer();return console.log("addDataEventRecord started"),console.log(b),a({url:d+"api/DataEventRecords/"+b.Id,method:"PUT",data:b}).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},g=function(b){var e=c.defer();return console.log("DeleteDataEventRecord begin"),console.log(b),a({url:d+"api/DataEventRecords/"+b,method:"DELETE",data:""}).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},h=function(){return b.info("DataEventRecordService DataEventRecords called"),console.log("addDataEventRecord started"),console.log(dataEventRecord),a.get(d+"/api/DataEventRecords").then(function(a){return a.data})},i=function(c){return b.info("DataEventRecordService GetDataEventRecord called: "+c.id),b.info(c),a.get(d+"/api/DataEventRecords/"+c.id).then(function(a){return a.data})};return{AddDataEventRecord:e,UpdateDataEventRecord:f,DeleteDataEventRecord:g,GetDataEventRecords:h,GetDataEventRecord:i}}var b=angular.module("mainApp");b.factory("DataEventRecordsService",["$http","$log","$q",a])}();